<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Chatrix</title>


	<link rel="stylesheet" href="wstyle.css" />
</head>
<body class="light-mode">
  
	<main>

		
		<aside id="sidebar">
			<header id="sidebar-header">
				<!--add logo-->
				<img src="2.svg" alt="" class="avatar" id="profile-image">
				<h2 class="hi">Chatrix</h2>
				<div class="toolbar">
					
					<img src="communities.svg" alt="" class="icon">
					
					<img src="status.svg" alt="" class="icon">
					<img src="new-chat.svg" alt="" class="icon">
					<div class="dropdown">
						<img src="menu.svg" alt="" class="icon dropdown-button">
						<div class="dropdown-content">

							<a href="#" id="openGroupModal">â• New chat</a>
						
							<a href="#">New community</a>
							<a href="#">Archived</a>
							<a href="#">Starred messages</a>
							<a href="#">Select chats</a>
							<a href="#">Settings</a>
							<a href="#">Log out</a>
              				 
							

							<button id="theme-toggle" waria-label="Toggle Theme" class="toggle">
  							<img src="moon.png" alt="Toggle Theme Icon" >
							</button>


							

						</div>
					</div>
				</div>
				
			</header>
			<form id="search-toolbar">
  <input type="search" id="search-input" placeholder="Search or start a new chat">
<img src="filter.svg" alt="filter" class="icon" id="filter-icon">

<ul id="chat-list">
  <li data-id="John">John:John jogs on high hills.</li>
  <li data-id="Family">Family: Father And Mother I Love You.</li>
  <li data-id="Friends">Friends: Forever Remembered, In Every Need, Devoted Support.</li>
  <li data-id="Amor">Amor: Good morning!</li>
</ul>


</form>



			<div class="connectivity-notification">
				<img src="warning.svg" alt="Offline warning">
				<div>
					<div class="connectivity-notification-title">
						Computer not connected
					</div>
					<span>
						Make sure your computer has an active Internet connection
					</span>
				</div>
			</div>
			<section id="sidebar-contents">
				<div id="chats-list">
					<div class="chat-tile">
						<img src="family.jpg" alt="" class="chat-tile-avatar">
						<div class="chat-tile-details">
							<div class="chat-tile-title">
								<span>Friends ğŸ¤—</span>
								<span>Tuesday</span>
							</div>
							<div class="chat-tile-subtitle">
								<span>You: hey there! how are you?</span>
								<span class="chat-tile-menu">
									<img src="pin.svg" alt="" class="pin">
								</span>
							</div>
						</div>
					</div>
					<div class="chat-tile">
						<img src="friends.jpg" alt="" class="chat-tile-avatar">
						<div class="chat-tile-details">
							<div class="chat-tile-title">
								<span>Family</span>
								<span>10:34 Pm</span>
							</div>
							<div class="chat-tile-subtitle">
								<span>Papa: You gotta be kidding me</span>
								<span class="chat-tile-menu">
									<img src="pin.svg" alt="" class="pin">
								</span>
							</div>
						</div>
					</div>
					<div class="chat-tile">
						<img src="amor.jpg" alt="" class="chat-tile-avatar">
						<div class="chat-tile-details">
							<div class="chat-tile-title">
								<span>Amor ğŸ’–</span>
								<span>Saturday</span>
							</div>
							<div class="chat-tile-subtitle">
								<span>You do not understand what I'm </span>
								<span class="chat-tile-menu">
									<img src="pin.svg" alt="" class="pin">
								</span>
							</div>
						</div>
					</div>
					<div class="chat-tile">
						<img src="john.jpg" alt="" class="chat-tile-avatar">
						<div class="chat-tile-details">
							<div class="chat-tile-title">
								<span>John</span>
								<span>Saturday</span>
							</div>
							<div class="chat-tile-subtitle">
								<span>Reply in group fast</span>
								<span class="chat-tile-menu">
									<img src="pin.svg" alt="" class="pin">
								</span>
							</div>
						</div>
					</div>


				</div>
			</section>
		</aside>
		<!-- Sidebar ends -->
		 

		<!-- Chat window -->
     
		<section id="chat-window">
			<div id="videoContainer" class="hidden">
  <video id="localVideo" autoplay muted></video>
  <video id="remoteVideo" autoplay></video>
  <button id="endCallBtn">End Call</button>
</div>

			<header id="chat-window-header">
				<img src="" alt="" class="avatar" id="profile-image">
				<div id="active-chat-details">
					<h3>Friends ğŸ¤—</h3>
					<div class="info">You and 69 others</div>
				</div>
				
				<img src="voice.svg" class="icon" id="voiceCallBtn" alt="Voice Call">

    
				<img src="video.svg"class="icon" id="videoCallBtn">
				<!-- Search Icon -->
				<img src="search.svg" id="search-icon" class="icon" alt="Search">
<input type="text" id="search-box" style="display: none;" placeholder="Search messages...">

				<div class="dropdown">
					<img src="menu.svg" alt="" class="icon dropdown-button">
					<div class="dropdown-content contact-menu">
						<a href="#">Contact info</a>
						<a href="#">Select messages</a>
						<a href="#">Close chat</a>
						<a href="#">Mute notifications</a>
						<a href="#">Disappearing messages</a>
						<a href="#">Clear messages</a>
						<a href="#">Delete chat</a>
						<a href="#">Report</a>
						<a href="#">Block</a>
					</div>
				</div>
			</header>
			<div id="chat-window-contents">

				<div class="datestamp-container">
					<span class="datestamp">
						03/05/2023
					</span>
				</div>
				<!-- Message group 1 -->
				<div class="chat-message-group">
					<img src="" alt="" class="chat-message-avatar">
					<div class="chat-messages">
						<div class="chat-message-container">
							<div class="chat-message chat-message-first">
								<div class="chat-message-sender">Vegashini</div>
								Hey there, how are you doing?
								<span class="chat-message-time">7:22 am</span>
							</div>
							<div class="emoji-toolbar">
								<img src="emoji.svg" alt="" class="icon reaction-button">
								<div class="reaction-emoji-selector">
									<a href="#" class="icon">ğŸ‘ğŸ»</a>
									<a href="" class="icon">ğŸ’–</a>
									<a href="" class="icon">ğŸ˜‚</a>
									<a href="" class="icon"></a>
									<a href="" class="icon"></a>
									<a href="" class="icon"></a>
								</div>
							</div>
						</div>
						<div class="chat-message">
							Are you up to some fun this weekend?
							<span class="chat-message-time">7:22 am</span>
						</div>
						<div class="chat-message">
							I'm thinking of going to the beach
							<span class="chat-message-time">7:23 am</span>
						</div>
						<div class="chat-tile">
  							<img src="" class="chat-tile-avatar" />
  						<div class="chat-tile-details">
    					<div class="chat-tile-title">
     					 <span>New Group</span>
      					<span>Now</span>
    					</div>
    <div class="chat-tile-subtitle">
      <span>You created a group</span>
      <span class="chat-tile-menu"><img src="pin.svg" /></span>
    </div>
  </div>
</div>
					</div>
				</div>
				
				<div class="chat-message-group">
					<img src="" alt="" class="chat-message-avatar">
					<div class="chat-messages">
						<div class="chat-message-container">
							<div class="chat-message chat-message-first">
								<div class="chat-message-sender">John</div>
								Sure man
								<span class="chat-message-time">7:30 am</span>
							</div>
							<div class="emoji-toolbar">
								<img src="emoji.svg" alt="" class="icon reaction-button">
								<div class="reaction-emoji-selector">
									<a href="#" class="icon">ğŸ‘ğŸ»</a>
									<a href="" class="icon">ğŸ’–</a>
									<a href="" class="icon">ğŸ˜‚</a>
									<a href="" class="icon"></a>
									<a href="" class="icon"></a>
									<a href="" class="icon"></a>
								</div>
							</div>
						</div>
						<div class="chat-message">
							When are you free? Let's meet at the cafe first.
							<span class="chat-message-time">7:30 am</span>
						</div>
						
					</div>
				</div>
			</div>
			<div class="succ">
<footer id="chat-window-footer">
  <div class="chat-input-area">
    <!-- Emoji and picker -->
    <div style="position:relative; display:inline-block;">
      <img src="emoji.svg" id="emojiBtn" class="icon" title="Emoji" />
      <div id="emojiPicker"></div>
    </div>

    <!-- Attachment icon and hidden input -->
    <img src="attachment.svg" id="attachBtn" class="icon" title="Attach" />
    <input type="file" id="fileInput" style="display:none" />

    <!-- Message input and calendar button -->
    <div class="input-wrapper">
      <input type="text" id="messageInput" placeholder="Type a message" autocomplete="off" />
      <button class="icon-btn" id="calendarIcon" title="Pick date & time">&#128197;</button>
    </div>
	<!-- Mic icon -->
    <img src="mic.svg" class="icon" id="micIcon" title="Voice Message" />

    <!-- Send button -->
    <img src="send.svg" alt="Send" class="send-icon" id="sendBtn" title="Send" />

    <!-- Timer dropdown -->
    <select id="timerSelect" title="Self-destruct timer">
      <option value="0">No Timer</option>
      <option value="5">5s</option>
      <option value="10">10s</option>
      <option value="30">30s</option>
    </select>

    
    <!-- Streak counter -->
    <div id="streakDisplay" class="streak-counter">ğŸ”¥ Streak: 0 message(s)</div>
  </div>
</footer>

<!-- Popup Modal -->
<div id="overlay" class="modal-overlay"></div>
<div id="popup" class="popup-modal">
  <input type="text" id="popupTitle" placeholder="Meeting Title">
  <input type="date" id="popupDate">
  <input type="time" id="popupTime"><br><br>
  <button id="popupSet">Set Meeting</button>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <button id="popupCancel">Cancel</button>
</div>

<!-- Alert Modal -->
<div id="alertOverlay" class="modal-overlay"></div>
<div id="alertModal" class="alert-modal">
  <p id="alertMessage"></p>
  <button id="alertOk">OK</button>
</div>

<!-- Scroll button -->
<a class="scroll-to-top-button" href="#">
  <img src="arrow-down.svg" class="icon scroll-to-top-button-icon" alt="Scroll Down" />
</a>




	
</main>
<script>
    function getChatId() {
      const params = new URLSearchParams(window.location.search);
      return params.get('chat') || 'default';
    }
    const chatId = getChatId();
    const chatKey = "chat_messages_" + chatId;

    function renderMessages() {
      const chatContainer = document.getElementById('chatContainer');
      chatContainer.innerHTML = '';
      let messages = JSON.parse(localStorage.getItem(chatKey) || "[]");

      messages.forEach(msg => {
        if (msg.type === 'call') {
          // Call summary message
          const div = document.createElement('div');
          div.className = 'message call-message';
          div.innerHTML = `
            <span class="icon">${msg.icon || 'ğŸ“'}</span>
            <div>
              <span class="sender">${msg.sender || ''}</span>
              <span>${msg.status}</span>
              <span class="timestamp">${msg.endedAt || ''}</span>
            </div>
          `;
          chatContainer.appendChild(div);
        } else {
          // Regular chat message (example, adapt to your message format)
          const div = document.createElement('div');
          div.className = 'message';
          div.innerHTML = `
            <span class="sender">${msg.sender || ''}</span>
            <span>${msg.text || ''}</span>
            <span class="timestamp">${msg.time || ''}</span>
          `;
          chatContainer.appendChild(div);
        }
      });
    }

    // Initial load
    renderMessages();
  </script>
	<script src="wwscript.js"></script>
	
	
</body>
</html>